# Modbus

## 1.定义

> Modbus免费、电气接口广泛、通信协议本身通俗易懂

## 2.协议

- modbusRTU (串口)
- modbusASCII (串口)
- modbusTCP (网口)
- modbusUDP(网口)
- modbusRTUOverTCP(网口)
- modbusRTUOverUDP(网口)
- modbusASCIIOverTCP(网口)
- modbusASCIIOverTCP(网口)

> ModbusRTU(二进制) 、ModbusASCII(ASCII)

例如: 十进制: 16Dec(一个字节) 对应 十六进制: 10Hex 对应ASCII 3130(两个字节)



### 2.1 存储区

- 输入线圈 (只读)  Bit					1                             10001-19999                   100001-165535
- 输出线圈 (读写)                            0                             00001-09999
- 输入寄存器(只读) 16位                3                             30001-39999
- 输出寄存器(读写)                         4                              40001-49999                   400001-465535

> 读字节数一定是一个偶数

### 2.2 功能码

> 目的就是读写存储区
>
> 保持型寄存器 等同于 输出寄存器

- 读
  - 读取输入线圈              0x02
  - 读取输出线圈              0x01
  - 读取输入寄存器          0x04
  - 读取输出寄存器          0x03
- 写
  - 写入单输出线圈         0x05
  - 写入多输出线圈         0x0F
  - 写入单输出寄存器     0x06
  - 写入多输出寄存器     0x10



> MaxIQ 256  
>
> ​	I0.0-I31.7     <==>  10001 - 10256
>
> ​	Q0.0-Q31.7       <==> 00001 - 00256
>
> ​	MaxAI 56
>
> ​	AlW0-AlW100    <==> 30001-30056

### 2.3 辅助软件

- Poll  (主站、客户端)
- Slave(从站、服务器)
- VSPD (虚拟串口)

主从: 

主站(主动)/从站(被动)

客户端(主动)/服务器(被动)